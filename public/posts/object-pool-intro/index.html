<!DOCTYPE html>
<html lang="en-us"><head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
   <meta name="description" content="
Note: This is the first post in a series about an object pooling pattern. You can follow along with code in this repo on Github. The repo will be steps ahead of this series, so don&rsquo;t worry if there&rsquo;s things in there I haven&rsquo;t explained.


Overview
Real world examples

Microsoft SqlClient
Ldaptive


Components of a pool

Object Pool
Object
Proxy
Object Factory


Summary

Overview
An Object pool is a pattern used to maintain a pool of objects (natch) that is useful in situations where initialization of those objects is expensive, such as database connections or network connections in general.">  

  <title>
    
      Object Pool - An Introduction
    
  </title>


  <link rel="shortcut icon" type="image/x-icon" href="/" />
  
  
  
  <link rel="stylesheet" href="/css/main.900100e9dbee2d56c58fac8bb717037cae7e26a9c36c29d2ff587bdd65f0cbbe510b41d81a3bb234919cdfdc7550d786b2fab70c8fc507772d732fe097106d12.css" integrity="sha512-kAEA6dvuLVbFj6yLtxcDfK5&#43;JqnDbCnS/1h73WXwy75RC0HYGjuyNJGc39x1UNeGsvq3DI/FB3ctcy/glxBtEg==" />
  
</head>
<body a="auto">
        <main class="page-content" aria-label="Content">
            <div class="w">
                <div class="post-meta">
                    <a href="/">..</a>

                    <p>
                        <time datetime="2020-10-21 00:00:00 &#43;0000 UTC">
                            2020-10-21
                        </time>
                    </p>
                </div>

<article>
    <h1>Object Pool - An Introduction</h1>

    

    <blockquote>
<p><strong>Note:</strong> This is the first post in a <a href="/tags/object-pool">series</a> about an object pooling pattern. You can follow along with code in this <a href="https://github.com/gregbair/object-pool">repo on Github</a>. The repo will be steps ahead of this series, so don&rsquo;t worry if there&rsquo;s things in there I haven&rsquo;t explained.</p>
</blockquote>
<ul>
<li><a href="#overview">Overview</a></li>
<li><a href="#real-world-examples">Real world examples</a>
<ul>
<li><a href="#microsoft-sqlclient">Microsoft SqlClient</a></li>
<li><a href="#ldaptive">Ldaptive</a></li>
</ul>
</li>
<li><a href="#components-of-a-pool">Components of a pool</a>
<ul>
<li><a href="#object-pool">Object Pool</a></li>
<li><a href="#object">Object</a></li>
<li><a href="#proxy">Proxy</a></li>
<li><a href="#object-factory">Object Factory</a></li>
</ul>
</li>
<li><a href="#summary">Summary</a></li>
</ul>
<h2 id="overview">Overview</h2>
<p>An Object pool is a pattern used to maintain a pool of objects (<em>natch</em>) that is useful in situations where initialization of those objects is expensive, such as database connections or network connections in general.</p>
<h2 id="real-world-examples">Real world examples</h2>
<h3 id="microsoft-sqlclient">Microsoft SqlClient</h3>
<p>When a new <code>SqlConnection</code> is opened, a <a href="https://github.com/dotnet/SqlClient/blob/v2.0.1/src/Microsoft.Data.SqlClient/netfx/src/Microsoft/Data/ProviderBase/DbConnectionPool.cs">connection pool</a> is either created or used based on the connection string. This also involves pool &ldquo;groups&rdquo;, which is how the pool-per-connection string is managed, but is out of the scope of this series.</p>
<h3 id="ldaptive">Ldaptive</h3>
<p>Ldaptive is a Java LDAP connection library. Most of the concepts in this series will be adapted from Ldaptive, as it&rsquo;s an accessible but robust <a href="https://github.com/vt-middleware/ldaptive/blob/master/core/src/main/java/org/ldaptive/pool/ConnectionPool.java">pool implementation</a>.</p>
<h2 id="components-of-a-pool">Components of a pool</h2>
<p><img src="/object-pool-components/object-pool-components.svg" alt="Component Diagram"></p>
<h3 id="object-pool">Object Pool</h3>
<p>The object pool is the main mechanism for maintaining the objects. It handles scaling up or down, delegation of the creation of new objects, and acts as traffic cop to hold requests for a bit when no new connections are available.</p>
<h3 id="object">Object</h3>
<p>The object is the thing requiring pooling. We expect this to implement <code>IDisposable</code>, as most objects needing pooling contain unmanaged resources. Even if it doesn&rsquo;t, we&rsquo;ll show in a later post how to create a class that does implement <code>IDisposable</code> to be usable in our pool.</p>
<h3 id="proxy">Proxy</h3>
<p>The proxy wraps the object and mainly tracks the lifecycle of the object in the pool and intercepts calls to <code>Dispose()</code> to return the object to the pool. This will be explained in the next post.</p>
<h3 id="object-factory">Object Factory</h3>
<p>The factory is responsible for actually creating the object, as the pool does not know how to actually construct its members.</p>
<h2 id="summary">Summary</h2>
<p>This post hopefully gave a good intro into the why and what of pooling mechanisms. In the next post, we&rsquo;ll go more in depth into the proxy, including talking about dynamic proxies and introducing <a href="https://www.castleproject.org/projects/dynamicproxy/">Dyanmic Proxy</a> from the Castle Project.</p>

</article>

            </div>
        </main>
    </body></html>
